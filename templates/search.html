<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <title>bookaudifier</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,700;0,800;1,600&display=swap"
          rel="stylesheet">
    <link href="{%  static  'css/index.css'  %}" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <link href="{%  static  'search/style.css'  %}" rel="stylesheet">
    <link href='https://use.fontawesome.com/releases/v5.3.1/css/all.css' rel='stylesheet'>
</head>
<body>
<div class="m-4">
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid" style="padding-left:2.5%; padding-right:2.5%;">
            <a class="navbar-brand" href="#">
                <img alt="bookaudifier" height="60px" src="{% static 'logo_image.png' %}">
            </a>
            <button class="navbar-toggler" data-bs-target="#navbarCollapse" data-bs-toggle="collapse" type="button">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav">
                    <a class="nav-item nav-link text-center active" href="#">Home</a>
                    <a class="nav-item nav-link text-center" href="#">Dashboard</a>
                    <a class="nav-item nav-link text-center" href="#">My Bookshelf</a>
                    <!--                    <a class="nav-item nav-link text-center" href="#">Genres</a>-->
                </div>
                <div class="navbar-nav ms-auto">
                    <button class="login rounded-pill">Login</button>
                </div>
            </div>
        </div>
    </nav>
</div>
<div>
    <div class="container h-100">
        <form action="search" method="POST">
            {% csrf_token %}
            <div class="d-flex justify-content-center h-100">
                <div class="searchbar">
                    <input class="search_input" name="search"
                           placeholder="e.g. The Subtle Art of Not Giving a F*ck........"
                           type="text">
                    <a class="search_icon button" href="#" type="submit"><i class="fas fa-search"></i></a>
                    </input>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="showing-results-text">
    Showing results for &nbsp <b> "{{ query }}"</b>
</div>
<div class="overlay">
    <div class="loading">Generating Audiobook</div>
    <div class="loading-mobile">Generating Audiobook</div>
    <div class="lds-dual-ring"></div>
</div>

</div>

<main>
    <div>
        <div class="container-fluid justify-content-center mb-4">
            <div class="row justify-content-center row-cols-sm-1 row-cols-md-2 row-cols-lg-4">
                {% if books_data %}
                {% for data in books_data %}
                <form action="{% url 'generate_audiobook' %}" class="book-wrap" id='{{data.book_id}}'
                      method="GET">
                    {% csrf_token %}
                    <input name="book" type="hidden" value={{data.pdf_link}}>
                    <div onclick="generateAudiobook({{data.book_id}});" style="cursor: pointer">
                        <div class="col mt-4">
                            <div class="book-card">
                                <div class="book-card__cover">
                                    <div class="book-card__book">
                                        <div class="book-card__book-front">
                                            <img class="book-card__img" src="{{data.img_link}}">
                                        </div>
                                        <div class="book-card__book-back"></div>
                                        <div class="book-card__book-side"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</main>
<div class="pagination" id="page-block" value="1">
    <form class="pagination-form" method="POST" style="display: flex; justify-content: center;">
        {% csrf_token %}
        <button class="previous rounded-pill" id="prev-click" name="search"
                value="{{query}}&page="> prev
        </button>
        <button class="next rounded-pill" id="next-click" name="search"
                value="{{query}}&page="> next
        </button>
    </form>
    <p id="page-number" style="display:none" type="hidden">{{current_pg_no}}</p>
</div>
<script src="{%  static  'search/script.js'  %}"></script>
</body>
</html>